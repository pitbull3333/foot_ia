<!DOCTYPE html>
<html>
	<head>
    	<meta charset="utf-8">
    	<link rel="stylesheet" href="index.css">
    	<link rel="shortcut icon" href="favicon.ico">
    	<title>FOOT IA</title>
  	</head>
	<body>
		<div id="div_canvas">
			<canvas id="canvas"></canvas>
		</div>
	</body>
</html>
<script src="/socket.io/socket.io.js"></script>
<script src="jquery.js"></script>
<script>
  $(document).ready(()=>{
    const socket = io();
    const canvas=$("#canvas")[0];
		const ctx=canvas.getContext("2d",{willReadFrequently:true});
		const largeur_canvas = $("#div_canvas").width();
		const hauteur_canvas = $("#div_canvas").height();
		if(largeur_canvas >= hauteur_canvas){
		  canvas.width = hauteur_canvas;
		  canvas.height = hauteur_canvas;
		  $("#div_commande").css("width",hauteur_canvas);
		}else{
      canvas.width = largeur_canvas;
      canvas.height = largeur_canvas;
    }
		socket.on('image', (dataUrl) => {
      const img = new Image();
      img.src = dataUrl;
      img.onload = () => {
        ctx.clearRect(0,0,largeur_canvas,hauteur_canvas);
        ctx.drawImage(img,0,0,canvas.width,canvas.height);
      }
    })
  })
</script>